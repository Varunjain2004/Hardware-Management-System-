<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Himanshu Hardware - Products</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="form-page">
        <div class="nav-bar">
            <h1>Himanshu Hardware</h1>
            <div class="nav-links">
                <a href="products.html" class="active">Products</a>
                <a href="cart.html">Cart <span id="cartCount">0</span></a>
                <a href="orders.html">My Orders</a>
                <a href="login.html" id="logoutBtn">Logout</a>
            </div>
        </div>
        
        <div class="main-container">
            <div class="search-section">
                <input type="text" id="searchInput" placeholder="Search products..." class="search-input">
                <select id="categoryFilter" class="category-select">
                    <option value="">All Categories</option>
                    <option value="tools">Tools</option>
                    <option value="electrical">Electrical</option>
                    <option value="plumbing">Plumbing</option>
                    <option value="paint">Paint</option>
                </select>
            </div>
            
            <div class="products-grid" id="productsGrid">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Sample products data
        const products = [
            {
                id: 1,
                name: "Professional Hammer",
                category: "tools",
                price: 299,
                image: "https://via.placeholder.com/200x150/0077b6/ffffff?text=Hammer",
                description: "High-quality professional hammer for all your needs"
            },
            {
                id: 2,
                name: "Screwdriver Set",
                category: "tools",
                price: 199,
                image: "https://via.placeholder.com/200x150/00b4d8/ffffff?text=Screwdriver",
                description: "Complete set of 10 screwdrivers"
            },
            {
                id: 3,
                name: "Electrical Wire",
                category: "electrical",
                price: 150,
                image: "https://via.placeholder.com/200x150/023e8a/ffffff?text=Wire",
                description: "High-quality electrical wire 100m roll"
            },
            {
                id: 4,
                name: "Paint Brush Set",
                category: "paint",
                price: 89,
                image: "https://via.placeholder.com/200x150/0077b6/ffffff?text=Paint+Brush",
                description: "Professional paint brush set of 5"
            },
            {
                id: 5,
                name: "Pipe Wrench",
                category: "plumbing",
                price: 450,
                image: "https://via.placeholder.com/200x150/00b4d8/ffffff?text=Pipe+Wrench",
                description: "Heavy-duty pipe wrench for plumbing work"
            },
            {
                id: 6,
                name: "Circuit Breaker",
                category: "electrical",
                price: 120,
                image: "https://via.placeholder.com/200x150/023e8a/ffffff?text=Circuit+Breaker",
                description: "Safety circuit breaker for electrical panels"
            }
        ];

        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        function displayProducts(filteredProducts = products) {
            const productsGrid = document.getElementById('productsGrid');
            productsGrid.innerHTML = filteredProducts.map(product => `
                <div class="product-card">
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <p class="product-category">${product.category}</p>
                        <p class="product-description">${product.description}</p>
                        <p class="product-price">â‚¹${product.price}</p>
                        <button onclick="addToCart(${product.id})" class="add-to-cart-btn">Add to Cart</button>
                    </div>
                </div>
            `).join('');
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        ...product,
                        quantity: 1
                    });
                }
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                showNotification('Product added to cart!');
            }
        }

        function updateCartCount() {
            const cartCount = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = cartCount;
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            
            const filtered = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) || 
                                    product.description.toLowerCase().includes(searchTerm);
                const matchesCategory = !category || product.category === category;
                return matchesSearch && matchesCategory;
            });
            
            displayProducts(filtered);
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', filterProducts);
        document.getElementById('categoryFilter').addEventListener('change', filterProducts);
        document.getElementById('logoutBtn').addEventListener('click', function() {
            // Use the global logout function
            if (typeof window.logout === 'function') {
                window.logout();
            } else {
                // Fallback logout
                localStorage.removeItem('currentUser');
                localStorage.removeItem('cart');
                window.location.href = 'login.html';
            }
        });

        // Initialize page
        displayProducts();
        updateCartCount();

        // Check if user is logged in
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (!currentUser) {
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>
